;消耗武器一覧表示
@SHOW_LIMITED_WEAPON_LIST

REDRAW 0
DRAWLINE
PRINTFORML 現在所持的消耗武器如下 ※弾数顕示的事(全弾数/一次能装填的弾数)
DRAWLINE

FOR LOCAL:0, 1, 9
	IF ITEM:(LOCAL:0)
		;0番のキャラを利用して表示を行う
		CFLAG:0:7 = LOCAL:0
		CFLAG:0:17 = ITEM:(GET_BULLET_ITEMID(LOCAL:0))
		PRINTFORM %ITEMNAME:(LOCAL:0), 20, LEFT% {ITEM:(LOCAL:0)}個 
		CALL ITEM_EXPLAIN(0, 0)
		PRINTL  
	ELSE
		SETCOLOR 0x333333
		PRINTFORML －－－
		RESETCOLOR
	ENDIF
NEXT
REDRAW 1

;消耗武器選択
;RETURN	装備するアイテムの番号
@SELECT_LIMITED_WEAPON(ARGS:0)

DRAWLINE
IF ARGS:0 == ""
	PRINTFORML 請選択要装備的道具
ELSE
	PRINTFORML %ARGS:0%
ENDIF
DRAWLINE

FOR LOCAL:0, 1, 9
	IF ITEM:(LOCAL:0)
		LOCAL:(LOCAL:0) = 1
		;0番のキャラを利用して表示を行う
		CFLAG:0:7 = LOCAL:0
		CFLAG:0:17 = ITEM:(GET_BULLET_ITEMID(LOCAL:0))
		PRINTFORM [{LOCAL:0}] %ITEMNAME:(LOCAL:0), 20, LEFT% {ITEM:(LOCAL:0)}個 
		CALL ITEM_EXPLAIN(0, 0)
		PRINTL  
	ELSE
		LOCAL:(LOCAL:0) = 0
		SETCOLOR 0x333333
		PRINTFORML [{LOCAL:0}] －－－
		RESETCOLOR
	ENDIF
NEXT
PRINTFORML [0] 返回

$INPUT_LOOP
INPUT

IF RESULT == 0
	RETURN 0
ELSEIF (RESULT >= 1) && (RESULT <= 9) && (LOCAL:(RESULT) == 1)
	RETURN RESULT
ELSE
	REUSELASTLINE 輸入値不正確。請重新輸入
	GOTO INPUT_LOOP
ENDIF

RESTART


;最大装填数取得
@GET_MAX_BULLET(ITEMID)
#FUNCTION
#DIM ITEMID

	SELECTCASE ITEMID
	;十字弓
	CASE 1
		RETURNF 70
	;魔法弓矢
	CASE 2
		RETURNF 60
	;火炎放射器
	CASE 3
		RETURNF 50
	;魔法導弾
	CASE 4
		RETURNF 40
	;草莓十字
	CASE 5
		RETURNF 30
	;博麗之御符
	CASE 6
		RETURNF 20
	;符卡
	CASE 7
		RETURNF 10
	;魔法拘束具
	CASE 8
		RETURNF 10
	;☆触手放射器
	CASE 9
		RETURNF 30
	CASEELSE
		RETURNF 0
	ENDSELECT
	
	

;消耗武器の弾ITEMIDを取得
@GET_BULLET_ITEMID(ITEMID)
#FUNCTION
#DIM ITEMID

	SELECTCASE ITEMID
	;十字弓
	CASE 1
		RETURNF 81
	;魔法弓矢
	CASE 2
		RETURNF 82
	;火炎放射器
	CASE 3
		RETURNF 83
	;魔法導弾
	CASE 4
		RETURNF 84
	;草莓十字
	CASE 5
		RETURNF 85
	;博麗之御符
	CASE 6
		RETURNF 86
	;符卡
	CASE 7
		RETURNF 87
	;魔法拘束具
	CASE 8
		RETURNF 88
	;☆触手放射器
	CASE 9
		RETURNF 89
	CASEELSE
		RETURNF -1
	ENDSELECT
	