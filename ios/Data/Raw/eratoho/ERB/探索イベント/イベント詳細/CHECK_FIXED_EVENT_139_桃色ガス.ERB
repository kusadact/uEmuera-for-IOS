;固定イベント
;RETURN	0:失敗した　1:成功した　2:以後のイベントスキップ
@CHECK_FIXED_EVENT_139
;LOCAL
;0	LOOP
;1	目標値
;2	達成値
;3	戻り値
;4	被害者あり

LOCAL:3 = 0

;目標値（イベント難易度）決定
LOCAL:1 = 0


;達成値決定
CALL GET_SEARCH_RATE
LOCAL:2 = RESULT


IF LOCAL:2 >= LOCAL:1
	CALL ADD_ABL_EXP_PT(0, 300)
	PRINTFORML 這個區域充満了桃色的気体！
	IF FLAG:AUTOMODE
		PRINTFORML 好像這個気体具有很強的催淫效果…
		TWAIT FLAG:AUTOMODE * 400, 0
	ELSE
		PRINTFORMW  好像這個気体具有很強的催淫效果…
	ENDIF

	PRINTFORML 
	LOCAL:4 = 0
	FOR LOCAL:0, 1, CHARANUM
		;現在位置が被っているかチェック
		IF CFLAG:1:4 == CFLAG:(LOCAL:0):4 && CFLAG:(LOCAL:0):2 == 0 && CFLAG:(LOCAL:0):3 == 0 && CFLAG:(LOCAL:0):21 == 0
			IF 50 < RAND:(100 + ABL:(LOCAL:0):10 * 50)
				CALL PRINT_MESSAGE((LOCAL:0), 200, 139, CALLNAME:(LOCAL:0), "", 1)
				CALL MASTURBATION((LOCAL:0), 0, 100)
				LOCAL:4 = 1
				
				IF FLAG:AUTOMODE
					TWAIT FLAG:AUTOMODE * 500, 0
				ELSE
					WAIT
				ENDIF
			ELSE
				CALL PRINT_MESSAGE((LOCAL:0), 200, 139, CALLNAME:(LOCAL:0), "", 2)
			ENDIF
		ENDIF
	NEXT
	
	IF LOCAL:4
		PRINTFORML 
		PRINTFORML 結束了自慰的%CALLNAME:1%%TACHI()%、帯着尷尬的表情重新開始了探索…
	ELSE
		PRINTFORML 
		PRINTFORML 成功保持住了正気的%CALLNAME:1%%TACHI()%、就這樣重新開始了探索…
	ENDIF
	
	
	IF FLAG:AUTOMODE
		TWAIT FLAG:AUTOMODE * 500, 0
	ELSE
		WAIT
	ENDIF
	
	;同じ場所に残り続ける
	
	LOCAL:3 = 1
ELSE
	;見つからなかった場合（通常は何もしない）
ENDIF

RETURN LOCAL:3

