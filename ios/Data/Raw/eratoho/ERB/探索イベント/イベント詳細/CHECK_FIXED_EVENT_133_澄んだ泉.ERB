;固定イベント
;RETURN	0:失敗した　1:成功した　2:以後のイベントスキップ
@CHECK_FIXED_EVENT_133
;LOCAL
;0	LOOP
;1	目標値
;2	達成値
;3	戻り値

LOCAL:3 = 0

;目標値（イベント難易度）決定
LOCAL:1 = 60


;達成値決定
CALL GET_SEARCH_RATE
LOCAL:2 = RESULT


IF LOCAL:2 >= LOCAL:1 || FLAG:133 >= 100
	;経験値が入るのは最初だけ
	IF FLAG:133 < 100
		CALL ADD_ABL_EXP_PT(0, 1000)
		FLAG:133 += 100
	ENDIF
	PRINTFORML 発現了一個充満了清澈的水的泉！　怎麼辦？
	PRINTFORML [1] 喝下泉水
	PRINTFORML [2] 進入泉水
	SIF FLAG:6 >= 300 && (CFLAG:1:29 == 1 || CFLAG:(FLAG:10):29 == 1 || CFLAG:(FLAG:11):29 == 1)
		PRINTFORML [3] 使用浄化力治愈同伴 (必要浄化力:300)
	;妊娠と母乳治療
	SIF FLAG:6 >= 300 && ((CFLAG:1:36 == 3 || (CFLAG:1:36 == 0 && CFLAG:1:22)) || (CFLAG:(FLAG:10):36 == 3 || (CFLAG:(FLAG:10):36 == 0 && CFLAG:(FLAG:10):22)) || (CFLAG:(FLAG:11):36 == 3 || (CFLAG:(FLAG:11):36 == 0 && CFLAG:(FLAG:11):22)))
		PRINTFORML [4] 使用浄化力和体力治療寄生・妊娠 (必要浄化力:300)
	SIF FLAG:6 >= 300 && (TALENT:1:130 == 1 || TALENT:(FLAG:10):130 == 1 || TALENT:(FLAG:11):130 == 1)
		PRINTFORML [5] 使用浄化力治療母乳体質 (必要浄化力:300)
	PRINTFORML [0] 離開這裡
	
	IF FLAG:AUTOMODE
		TINPUT FLAG:AUTOMODE * 1000 , RAND:2 + 1, 0, ""
	ELSE
		INPUT
	ENDIF

	IF RESULT == 1
		PRINTFORML %CALLNAME:1%%TACHI()%喝下了泉水…
		PRINTFORML 短暫的休息了一会、隊員的MP回復了少許！
		CALL PRINT_MESSAGE(1, 200, 133, CALLNAME:1, "", 0)
		CALL PRINT_MESSAGE(FLAG:10, 200, 133, CALLNAME:1, "", 0)
		CALL PRINT_MESSAGE(FLAG:11, 200, 133, CALLNAME:1, "", 0)
		BASE:1:1 += MAXBASE:1:1 / 4
		IF BASE:1:1 > MAXBASE:1:1
			BASE:1:1 = MAXBASE:1:1
		ENDIF
		;尿意追加
		CALL ADD_BASE_NP(1,3)
		IF FLAG:10
			BASE:(FLAG:10):1 += MAXBASE:(FLAG:10):1 / 4
			IF BASE:(FLAG:10):1 > MAXBASE:(FLAG:10):1
				BASE:(FLAG:10):1 = MAXBASE:(FLAG:10):1
			ENDIF
			;尿意追加
			CALL ADD_BASE_NP(FLAG:10,3)
		ENDIF
		IF FLAG:11
			BASE:(FLAG:11):1 += MAXBASE:(FLAG:11):1 / 4
			IF BASE:(FLAG:11):1 > MAXBASE:(FLAG:11):1
				BASE:(FLAG:11):1 = MAXBASE:(FLAG:11):1
			ENDIF
			;尿意追加
			CALL ADD_BASE_NP(FLAG:11,3)
		ENDIF
	ELSEIF RESULT == 2
		PRINTFORML %CALLNAME:1%%TACHI()%脱個精光、進入了泉水之中…
		PRINTFORML 沖洗汚垢讓発熱的身体平静了下来、隊員的EP回復了少許！
		CALL PRINT_MESSAGE(1, 200, 133, CALLNAME:1, "", 1)
		CALL PRINT_MESSAGE(FLAG:10, 200, 133, CALLNAME:1, "", 1)
		CALL PRINT_MESSAGE(FLAG:11, 200, 133, CALLNAME:1, "", 1)
		BASE:1:2 += MAXBASE:1:2 / 2
		IF BASE:1:2 > MAXBASE:1:2
			BASE:1:2 = MAXBASE:1:2
		ENDIF
		BASE:1:5 = 0
		IF FLAG:10
			BASE:(FLAG:10):2 += MAXBASE:(FLAG:10):2 / 2
			IF BASE:(FLAG:10):2 > MAXBASE:(FLAG:10):2
				BASE:(FLAG:10):2 = MAXBASE:(FLAG:10):2
			ENDIF
			BASE:(FLAG:10):5 = 0
		ENDIF
		IF FLAG:11
			BASE:(FLAG:11):2 += MAXBASE:(FLAG:11):2 / 2
			IF BASE:(FLAG:11):2 > MAXBASE:(FLAG:11):2
				BASE:(FLAG:11):2 = MAXBASE:(FLAG:11):2
			ENDIF
			BASE:(FLAG:11):5 = 0
		ENDIF
	ELSEIF RESULT == 3
		PRINTFORML 清澈之泉和浄化之力、治愈了%CALLNAME:1%%TACHI()%的身体！
		SIF CFLAG:1:29 == 0
			CALL PRINT_MESSAGE(1, 200, 133, CALLNAME:1, "", 3)
		SIF CFLAG:(FLAG:10):29 == 0
			CALL PRINT_MESSAGE(FLAG:10, 200, 133, CALLNAME:(FLAG:10), "", 3)
		SIF CFLAG:(FLAG:10):29 == 0
			CALL PRINT_MESSAGE(FLAG:11, 200, 133, CALLNAME:(FLAG:11), "", 3)
		FLAG:6 -= 300
		IF CFLAG:1:29 == 1
			PRINTFORML %CALLNAME:1%的眼睛重新出現了光芒！
			CALL PRINT_MESSAGE(1, 200, 133, CALLNAME:1, "", 4)
			BASE:1:1 = MAXBASE:1:1 / 4
			CFLAG:1:29 = 0
		ENDIF
		IF CFLAG:(FLAG:10):29 == 1
			PRINTFORML %CALLNAME:(FLAG:10)%的眼睛重新出現了光芒！
			CALL PRINT_MESSAGE(FLAG:10, 200, 133, CALLNAME:(FLAG:10), "", 4)
			BASE:(FLAG:10):1 = MAXBASE:(FLAG:10):1 / 4
			CFLAG:(FLAG:10):29 = 0
		ENDIF
		IF CFLAG:(FLAG:11):29 == 1
			PRINTFORML %CALLNAME:(FLAG:11)%的眼睛重新出現了光芒！
			CALL PRINT_MESSAGE(FLAG:11, 200, 133, CALLNAME:(FLAG:11), "", 4)
			BASE:(FLAG:11):1 = MAXBASE:(FLAG:11):1 / 4
			CFLAG:(FLAG:11):29 = 0
		ENDIF
	;泉パワーアップ追加***************************************************************
	ELSEIF RESULT == 4
		PRINTFORML 清澈之泉和浄化之力、消滅了%CALLNAME:1%%TACHI()%的胎内的異形！
		PRINTFORML 但是、過於強烈的浄化之力同時奪走了作為宿主的%CALLNAME:1%%TACHI()%的体力……
		FLAG:6 -= 300
		IF CFLAG:1:36 == 3 || (CFLAG:1:36 == 0 && CFLAG:1:22)
			PRINTFORML %CALLNAME:1%的胎内盤踞着的異形被消滅了！
			BASE:1:0 = 0
			CFLAG:1:22 = 0
			CFLAG:1:23 = 0
			CFLAG:1:36 = 0
		ENDIF
		IF CFLAG:(FLAG:10):36 == 3 || (CFLAG:(FLAG:10):36 == 0 && CFLAG:(FLAG:10):22)
			PRINTFORML %CALLNAME:(FLAG:10)%的胎内盤踞着的異形被消滅了！
			BASE:(FLAG:10):0 = 0
			CFLAG:(FLAG:10):22 = 0
			CFLAG:(FLAG:10):23 = 0
			CFLAG:(FLAG:10):36 = 0
		ENDIF
		IF CFLAG:(FLAG:11):36 == 3 || (CFLAG:(FLAG:11):36 == 0 && CFLAG:(FLAG:11):22)
			PRINTFORML %CALLNAME:(FLAG:11)%的胎内盤踞着的異形被消滅了！
			BASE:(FLAG:11):0 = 0
			CFLAG:(FLAG:11):22 = 0
			CFLAG:(FLAG:11):23 = 0
			CFLAG:(FLAG:11):36 = 0
		ENDIF
	ELSEIF RESULT == 5
		PRINTFORML 清澈之泉和浄化之力、讓%CALLNAME:1%%TACHI()%的胸部回到了正常的状態！
		FLAG:6 -= 300
		IF TALENT:1:130 == 1
			PRINTFORML %CALLNAME:1%的母乳止住了！
			TALENT:1:130 = 0
		ENDIF
		IF TALENT:(FLAG:10):130 == 1
			PRINTFORML %CALLNAME:(FLAG:10)%的母乳止住了！
			TALENT:(FLAG:10):130 = 0
		ENDIF
		IF TALENT:(FLAG:11):130 == 1
			PRINTFORML %CALLNAME:(FLAG:11)%的母乳止住了！
			TALENT:(FLAG:11):130 = 0
		ENDIF
	;***********************************************************************************
	
	
	ELSE
		PRINTFORML %CALLNAME:1%%TACHI()%離開了湧泉…
		CALL PRINT_MESSAGE(1, 200, 133, CALLNAME:1, "", 2)
		CALL PRINT_MESSAGE(FLAG:10, 200, 133, CALLNAME:1, "", 2)
		CALL PRINT_MESSAGE(FLAG:11, 200, 133, CALLNAME:1, "", 2)
	ENDIF

	IF FLAG:(FLAG:5 + 50) < 10 && ITEM:73 < 3
		PRINTFORML 在充満了清澈空気的這裡、生長着一些其他地方沒有的清涼花草……
		CALL ADD_ITEM(73, 3, 1)
		CALL PRINT_MESSAGE(1, 200, 133, CALLNAME:1, "", 5)
		CALL PRINT_MESSAGE(FLAG:10, 200, 133, CALLNAME:1, "", 5)
		CALL PRINT_MESSAGE(FLAG:11, 200, 133, CALLNAME:1, "", 5)
	ENDIF

	;どの場合でもイベントをその場に残す
	LOCAL:3 = 1
	IF FLAG:AUTOMODE
		TWAIT FLAG:AUTOMODE * 500, 0
	ELSE
		WAIT
	ENDIF
ELSE
	;見つからなかった場合（通常は何もしない）
ENDIF

RETURN LOCAL:3

