;固定イベント
;RETURN	0:失敗した　1:成功した　2:以後のイベントスキップ
@CHECK_FIXED_EVENT_163
;LOCAL
;0	LOOP
;1	目標値
;2	達成値
;3	戻り値
;4	被害者あり
;5	ガスの種類
;6	回避力

LOCAL:3 = 0

;目標値（イベント難易度）決定
LOCAL:1 = 0


;達成値決定
CALL GET_SEARCH_RATE
LOCAL:2 = RESULT


IF LOCAL:2 >= LOCAL:1
	CALL ADD_ABL_EXP_PT(0, 300)
	IF FLAG:AUTOMODE
		PRINTFORML 突然從周囲湧出了大量気体！
		TWAIT FLAG:AUTOMODE * 400, 0
	ELSE
		PRINTFORMW  突然從周囲湧出了大量気体！
	ENDIF

	PRINTFORML 
	LOCAL:5 = RAND:2
	
	
	IF RAND:2 == 0
		PRINTFORML 周囲瀰漫着純浄的空気、讓%CALLNAME:1%%TACHI()%的身体也被這気体浄化了…
		FLAG:(50 + FLAG:5) = 0
		BASE:1:5 = 0
		IF FLAG:10
			BASE:(FLAG:10):5 = 0
		ENDIF
		IF FLAG:11
			BASE:(FLAG:11):5 = 0
		ENDIF
		
	ELSE
		PRINTFORML %CALLNAME:1%%TACHI()%不小心吸入了気体！
		PRINTFORML 但是、雖然這個気体散発着強烈的気味、実際上卻沒有特別的效果…
		IF FLAG:AUTOMODE
			PRINTFORML 因為這奇妙的陷穽而歪了歪頭的%CALLNAME:1%%TACHI()%重新開始了探索
			TWAIT FLAG:AUTOMODE * 400, 0
		ELSE
			PRINTFORMW  因為這奇妙的陷穽而歪了歪頭的%CALLNAME:1%%TACHI()%重新開始了探索
		ENDIF

		BASE:1:5 = 100
		IF FLAG:10
			BASE:(FLAG:10):5 = 100
		ENDIF
		IF FLAG:11
			BASE:(FLAG:11):5 = 100
		ENDIF
	ENDIF
	
	
	IF FLAG:AUTOMODE
		TWAIT FLAG:AUTOMODE * 500, 0
	ELSE
		WAIT
	ENDIF
	
	;別の場所に移動
	FLAG:163 = RAND:30 + 1
	
	LOCAL:3 = 1
ELSE
	;見つからなかった場合（通常は何もしない）
ENDIF

RETURN LOCAL:3

