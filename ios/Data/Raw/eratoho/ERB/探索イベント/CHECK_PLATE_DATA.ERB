;石版チェック
@CHECK_PLATE_DATA
;LOCAL
;0	LOOP
;1	答えあわせ（0：間違い　1：正解）

LOCAL:1 = 0

SELECTCASE FLAG:40
	CASE 0
		IF FLAG:41 == 1 && FLAG:42 == 2 && FLAG:43 == 3
			LOCAL:1 = 1
		ENDIF
	CASE 1
		IF FLAG:41 == 1 && FLAG:42 == 3 && FLAG:43 == 2
			LOCAL:1 = 1
		ENDIF
	CASE 2
		IF FLAG:41 == 2 && FLAG:42 == 1 && FLAG:43 == 3
			LOCAL:1 = 1
		ENDIF
	CASE 3
		IF FLAG:41 == 2 && FLAG:42 == 3 && FLAG:43 == 1
			LOCAL:1 = 1
		ENDIF
	CASE 4
		IF FLAG:41 == 3 && FLAG:42 == 1 && FLAG:43 == 2
			LOCAL:1 = 1
		ENDIF
	CASEELSE
		IF FLAG:41 == 3 && FLAG:42 == 2 && FLAG:43 == 1
			LOCAL:1 = 1
		ENDIF
ENDSELECT

;答えあわせが終わったらフラグリセット
FLAG:41 = 0
FLAG:42 = 0
FLAG:43 = 0


PRINTFORMW 吟唱完呪文的%CALLNAME:1%%TACHI()%的眼前出現了放着光芒的漩渦！
PRINTFORML 要跳入漩渦之中麼？
CALL ASK_YN
IF RESULT == 0
	IF LOCAL:1 || FLAG:999
		;正解の場合かEXモードの場合
		CALL GAMEOVER(3)
	ELSE
		;間違いの場合
		PRINTFORMW 石碑上写着的内容到底是不是真実的呢…
		PRINTFORMW 雖然抱着這樣的疑問、但是已経走到了這個地歩的%CALLNAME:1%%TACHI()%下定決心跳入了発光的漩渦！
		PRINTFORML 
		IF RAND:3 == 0
			;ボス部屋に飛ばされる
			PRINTFORML %CALLNAME:1%%TACHI()%睜開了眼睛、在那裡有着巨大的魔物傲然站立
			PRINTFORML 看来吟唱呪文的順序錯了、因此好像転送到了首領所在的部屋…
			PRINTFORML 但是幸運的是対方還沒有注意到這裡、還是尽早逃走比較好…
			LOCAL:2 = DA:1:4
			FLAG:5 = LOCAL:2
			FLAG:(600 + FLAG:5) = 1
			FOR LOCAL:0, 0, 3
				IF GET_MEMBER(LOCAL:0)
					CALL PRINT_MESSAGE(GET_MEMBER(LOCAL:0), 213, 0, CALLNAME:1)
					CFLAG:(GET_MEMBER(LOCAL:0)):4 = LOCAL:2
					CFLAG:(GET_MEMBER(LOCAL:0)):13 = LOCAL:2
					CFLAG:(GET_MEMBER(LOCAL:0)):14 = LOCAL:2
				ENDIF
			NEXT
		ELSE
			;触手の巣に飛ばされる
			PRINTFORML 奇妙的感覚覆蓋住全身、%CALLNAME:1%%TACHI()%睜開了眼睛
			PRINTFORML 看来吟唱呪文的順序錯了、因此好像転送到了触手們的巣穴…
			PRINTFORML 突然從天而降的食物、讓周囲的触手一斉襲向了%CALLNAME:1%%TACHI()%！
			LOCAL:2 = RAND:30 + 1
			FLAG:5 = LOCAL:2
			FLAG:(600 + FLAG:5) = 1
			FOR LOCAL:0, 0, 3
				IF GET_MEMBER(LOCAL:0)
					CALL PRINT_MESSAGE(GET_MEMBER(LOCAL:0), 214, 0, CALLNAME:1)
					LOCAL:5 = 7 + RAND:3 + RAND:3
					FOR LOCAL:1, 0, LOCAL:5
						LOCAL:6 = RAND:4
						IF LOCAL:6 == 3
							CALL LOST_VIRGIN(GET_MEMBER(LOCAL:0), 1, 4)
						ENDIF
						CALL EXTASY(GET_MEMBER(LOCAL:0), LOCAL:6, 50 + RAND:50, 100)
					NEXT
					CFLAG:(GET_MEMBER(LOCAL:0)):4 = LOCAL:2
					CFLAG:(GET_MEMBER(LOCAL:0)):13 = LOCAL:2
					CFLAG:(GET_MEMBER(LOCAL:0)):14 = LOCAL:2
					WAIT
				ENDIF
			NEXT
			PRINTFORML 雖然受到了差点昏迷過去的凌辱、但是%CALLNAME:1%%TACHI()%總算是從那裡溜走了！
		ENDIF
		WAIT
	ENDIF
	RETURN 0
ENDIF

RETURN 1

