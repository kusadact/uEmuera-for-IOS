
; ------------------------------------------------------------------------------
; ■ 101 迷宮内で他のキャラと会った - キャラクター別 017 メルラン
; ------------------------------------------------------------------------------

; □ 0 通常
@KOJO_27_0_SYSTEM_MESSAGE_101_X_0_CHARA_17(ARG:0, ARG:1, ARGS:0, ARGS:1, ARG:2, ARG:3, ARG:4, ARG:5, ARG:6)
	; 遭遇キャラは拘束されている
	IF CFLAG:(ARG:1):504
	
	; 催眠行動中
	ELSEIF CFLAG:(ARG:1):43 == 1
	
	; 遭遇キャラと寸前まで共闘していた
	ELSEIF ARG:1 == PARTY_NO:1 || ARG:1 == PARTY_NO:2
		
	; 通常行動中
	ELSE
		; 対象のキャラとは初遭遇
		; 表示タイミングが一度しかない口上、優先口上として処理する
		IF KOJO_27_0_GET_ENCOUNTER_COUNT(ARG:1) == 0
			CALL KOJO_27_0_SET_IMPORTANT_FLAG()
			CALL KOJO_27_0_ADD_MESSAGE, @"「チンドン屋ってこんなトコにも出張すんの？　大変ねえ」\n"
			
			; パーティーにリリカとルナサ両方が居るなら追加口上
			IF CHECK_MEMBER_FROM_NO(16) && CHECK_MEMBER_FROM_NO(18)
				CALL KOJO_27_0_ADD_MESSAGE, @"（三姉妹が揃ったのはいいけど、これ以上大人数で動くの危なそうなのよね）\n"
				CALL KOJO_27_0_ADD_MESSAGE, @"「プリズムリバー最後の一人発見」\n"
			
			; パーティーにリリカが居るなら追加口上
			ELSEIF CHECK_MEMBER_FROM_NO(16)
				CALL KOJO_27_0_ADD_MESSAGE, @"「%KOJO_27_0_CALLNAME_FROM_ID(GET_ID_FROM_NO(16))%の姉発見」\n"
			
			; パーティーにルナサが居るなら追加口上
			ELSEIF CHECK_MEMBER_FROM_NO(18)
				CALL KOJO_27_0_ADD_MESSAGE, @"「%KOJO_27_0_CALLNAME_FROM_ID(GET_ID_FROM_NO(18))%の妹発見」\n"
				
			ENDIF

			RETURN 1
		ENDIF
	ENDIF
RETURN 1


; □ 1 喪失中
@KOJO_27_0_SYSTEM_MESSAGE_101_X_1_CHARA_17(ARG:0, ARG:1, ARGS:0, ARGS:1, ARG:2, ARG:3, ARG:4, ARG:5, ARG:6)
	; 遭遇キャラは拘束されている
	IF CFLAG:(ARG:1):504
	
	; 遭遇キャラと寸前まで共闘していた
	ELSEIF ARG:1 == PARTY_NO:1 || ARG:1 == PARTY_NO:2
	
	; 通常行動中
	ELSE

	ENDIF
RETURN 1
